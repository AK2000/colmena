language: python
python:
- '3.7'
services:
- redis
before_install:
- python$PY -m pip install Cython
- python$PY -m pip install numpy
- python$PY --version
- python$PY -m cython --version
- python$PY -c "import numpy;print(numpy.__version__)"
install:
- pip install .
script:
- pip install -r test-requirements.txt
- flake8 colmena/
- pytest colmena
deploy:
  provider: pypi
  user: __token__
  skip_existing: true
  distributions: sdist bdist_wheel
  password:
    secure: UdTBLPPV9BTP73uc1/wOtltzCnHHZsRaTPr7gdVfboLkOEdm/bmf3QHY/IJnIb/NCjusg2a49c9ObMdy+ew6UeHYki5X+FWqeHD4knym8uO5mIiUgUXAMyfZV7LnZnk05wtoEC7LEQB+14n7HbxF/oh1hPzLzTTMHRpRTCDMoC3CTJ8T9e9iNAG76tDqOZVnz7eRSD3J4z5uXgD4Pecz2KRAQsvLdtA1YTn5JJ0fZDGSJ1rHSY91RxIxSEe354OaXcHV36TwndpfDWJBNRytCeMZs89rfMaTKlp4ABRFO3iCYdc/2WYkBLCtJA6n7o0Z/qM/KAzaGVLeoePLPYUAQOnTnp0YG+J0VAgvdUEBbWEPzdwkoQrGtoPNP+2i/hD+ugWD2Nf2iCLcvm1WrVtIvEr1jhEdm+44/UHAjKvoDP0EviOI8FeqNQqSI5bEA3+kjZmyQ903GEnMk3qUBJsit6BuJdoJsx3B4blkIO39HKpWYeh/O1kPlTkMhJFrq5Nco0YrB5DPg1TUUawuMTEONf6JCjqTnxJHFtqb5W9EtJC7eR8J9D20u3j8FEF3HwIOv9lHsTvR6iGviThPCTt96yF+bru3OtmMDBoNt7nQUofzLkrXjpzACQZDF2X19fmUBlmswmav70hUGj+gvFs4y97VTYmsisgqkFFDJXA6+Gg=
  on:
    tags: true
    branch: master
